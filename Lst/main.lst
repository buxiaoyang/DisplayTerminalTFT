C51 COMPILER V7.50   MAIN                                                                  02/23/2014 17:33:59 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Obj\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Src\main.c COMPACT BROWSE INCDIR(.\Src) DEBUG OBJECTEXTEND PRINT(.\Lst\main
                    -.lst) OBJECT(.\Obj\main.obj)

line level    source

   1          /************************************************************/
   2          /*项目：DisplayTerminalTFT
   3          /*模块：主函数
   4          /*CPU:  STC11L60XE
   5          /*晶振: 24Mhz
   6          /*液晶: s6d0154-2.6 TFT
   7          /*日期：2014年2月17日
   8          /*修改：卜晓D
   9          /************************************************************/
  10          
  11          #include "reg52stc.h"
  12          #include "s6d0154.h"
  13          #include "serial.h"
  14          
  15          /******************** 定时器定义 *******************/
  16          #define T0_H 0xF8 //0xFC  1ms from 12MHz 998 to 24MHz 1998
  17          #define T0_L 0x32 //0x1A
  18          #define T1_H 0xfe
  19          #define T1_L 0x31
  20          
  21          extern uint readSerialTimeOut;
  22          extern uchar displayRunning; 
  23          extern uchar isLoadingDisplay;  
  24          /******************** 定时器0中断函数 *******************/
  25          void time0() interrupt 1 //using 1
  26          {
  27   1          TR0=0;
  28   1          TH0=T0_H;   
  29   1          TL0=T0_L;   
  30   1          TR0=1;
  31   1      }
  32          
  33          /******************** 系统初始化函数 *******************/
  34          void InitSys(void)
  35          {
  36   1          EA=0;
  37   1          TCON=0x05;  //1->0 == EX0 INT !!!
  38   1          TMOD=0x21;  //time0:16bit;time1:serial
  39   1          TH1=0xe6;    //12MHz,0xf3, 12T,SMOD=0,2400bps; 24MHz 0xe6
  40   1          TL1=0xe6;
  41   1              PCON=0x00; 
  42   1          SCON=0x70; //MODE:1;   串口10位异步收发，定时器控制
  43   1          ES=1;      //串口中断开
  44   1          ET1=0;
  45   1          TR1=1;
  46   1          ET0=1;
  47   1          EA=1;
  48   1      }
  49          
  50          /******************** 主函数 *******************/
  51          void main(void)
  52          {
  53   1              InitSys();
  54   1          LCD_Init();
C51 COMPILER V7.50   MAIN                                                                  02/23/2014 17:33:59 PAGE 2   

  55   1              Display_Loding();
  56   1          while(1)
  57   1          {
  58   2                      if(!isLoadingDisplay)
  59   2                      {
  60   3                              if(!displayRunning)
  61   3                              {
  62   4                                      Display_Running();
  63   4                                      displayRunning = 1;     
  64   4                              }
  65   3                              Display_Running_Refresh();
  66   3                              delayms(1000);
  67   3                      }
  68   2                      readSerialTimeOut++;
  69   2                      if(readSerialTimeOut > 50)
  70   2                      {
  71   3                              DisplayData[15] = 'E';
  72   3                              DisplayData[17] = 'E';
  73   3                      } 
  74   2          }
  75   1      }
  76          
  77          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    111    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
