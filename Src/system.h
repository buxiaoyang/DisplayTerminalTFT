#ifndef _SYSTEM_
#define _SYSTEM_

//******************************************************************
//            sys  INTTERRUPT   start
//******************************************************************
//  TIME 0  :   1ms
//------------------------------------------------------------------
extern unsigned int etx0;
void time0() interrupt 1 //using 1
{
    //EA=0;
    TR0=0;//停止运行T0
    TH0=T0_H;   
    TL0=T0_L;   
    TR0=1;
    //EA=1;
    //--------------------------------
    etx0++;
    //--------------------------------
}
//******************************************************************
//  TIME 1  :   for 9600bps serial
//------------------------------------------------------------------
/*
void time1() interrupt 3 using 3
{
    //EA=0;
    TR1=0; 
    TH1=T1_H;
    TL1=T1_L;
    //TR0=1;
    //EA=1;
//-------------------------------- 
}
*/
//****************************************************************
//                   Initial System
//****************************************************************
void InitSys(void)
{
//------------------------------- sys --------
    EA=0;
    TCON=0x05;  //1->0 == EX0 INT !!!
    TMOD=0x21;  //time0:16bit;time1:serial
    
    TH1=0xe6;    //12MHz,0xf3, 12T,SMOD=0,2400bps; 24MHz 0xe6
    TL1=0xe6;
//    TH1=0xfd;  //11.0592MHz,12T,SMOD=0,9600bps
//    TL1=0xfd;
    
    PCON=0x00; 
    /////////////////////////////////// 
    SCON=0x70; //MODE:1;   串口10位异步收发，定时器控制
    /////////////////////////////////// 
    ES=1;      //串口中断开
    
    ET1=0;
    TR1=1;
    //-------------------------------
    ET0=1;
//    TR0=1;
    
    EA=1;
}
//******************************************************************
//  
//------------------------------------------------------------------
#endif // _SYSTEM_