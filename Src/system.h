//******************************************************************
//            sys  INTTERRUPT   start
//******************************************************************
//  TIME 0  :   1ms
//------------------------------------------------------------------
void time0() interrupt 1 using 1
{
    //EA=0;
    TR0=0;//停止运行T0
    TH0=T0_H;   
    TL0=T0_L;   
    TR0=1;
    //EA=1;
    //--------------------------------键盘扫描

    //--------------------------------
    //ms1_ok_flag=1;//1ms flag
}
//******************************************************************
//  TIME 1  :   for 9600bps serial
//------------------------------------------------------------------
/*
void time1() interrupt 3 using 3
{
    //EA=0;
    TR1=0; 
    TH1=T1_H;
    TL1=T1_L;
    //TR0=1;
    //EA=1;
//-------------------------------- 
}
*/
//****************************************************************
//                   Initial System
//****************************************************************
void InitSys(void)
{
    //OUT0=0;     //关断加热输出
    //OUT1=1;
//------------------------------- sys --------
    EA=0;
    TCON=0x05;  //1->0 == EX0 INT !!!
    TMOD=0x21;  //time0:16bit;time1:serial
    
    TH0=T0_H;   
    TL0=T0_L;    
    
    TH1=0xfd;  //11.0592Mhz,serial
    TL1=0xfd;
    
    PCON=0x00; 
    /////////////////////////////////// 
    SCON=0xf0; //MODE:3;   串口11位异步收发，定时器控制
    /////////////////////////////////// 
    ES=1;      //串口中断开
    
//    PS=1;      //串口最高优先级
//    PT0=0;	   //T0为低优先级

    TR1=1;
    ET1=0;
    //-------------------------------
    ET0=1;
    TR0=1;
    
	EA=1;
    //-------------------------------ram
    //flag1=0;flag2=0;flag3=0;flag4=0;
    
    //ms200_en_flag=1;    //for key scan enable
    //s1_en_flag=1;
}
//******************************************************************
//  
//------------------------------------------------------------------
